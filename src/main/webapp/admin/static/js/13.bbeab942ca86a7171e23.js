webpackJsonp([13],{"9Xuo":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("mHM2")),a=o(t("UjMW")),s=o(t("xplR"));function o(e){return e&&e.__esModule?e:{default:e}}n.default={components:{TkmDialog:a.default,TkmTable:s.default},data:function(){return{dialog:!1,dialogMsg:"",form:{findContent:""},dialogForm:{name:"",type:""},tableData:[],searchOperations:[{name:"查询",action:"onSubmit",type:"normal"},{name:"清空用户权限",action:"clearPermission"}],headers:[{name:"角色名称"},{name:"角色类型"},{name:"拥有的权限"}],permissions:[],permissionIds:[]}},methods:{initData:function(e,n,t){var a=this;i.default.getList.bind(this)({findContent:e.findContent,pageNo:e.pageNo},function(e){a.tableData=e,n()},function(e){t(e)})},rowsOperation:function(e,n,t,a){var s=this;"selectPermission"===e?i.default.getPermissions.bind(this)({id:n.id},function(e){s.permissionIds=[],s.permissions=e.map(function(e){return"0"!==e.marker&&s.permissionIds.push(e.id),e.id=e.id+"",e}),s.$refs.dialogForm.openDialog(function(){i.default.addPermissions.bind(s)({permissionIds:s.permissionIds,roleId:n.id},function(e){t(e.message)},function(e){a(e)})},function(){})},function(e){a(e)}):t()},searchOperation:function(e,n,t){var a=this;"clearPermission"===e?(this.dialogMsg="确认要清空这些用户的权限吗？",this.$refs.dialog.openDialog(function(){i.default.clearPermission.bind(a)({tableData:a.tableData},function(e){n(e.message)},function(e){t(e)})},function(){})):n()}}},e.exports=n.default},E7SX:function(e,n){},L6ew:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("9Xuo"),a=t.n(i);for(var s in i)"default"!==s&&function(e){t.d(n,e,function(){return i[e]})}(s);var o=t("qjtb");var r=function(e){t("E7SX")},d=t("VU/8")(a.a,o.a,!1,r,"data-v-6c9bc670",null);n.default=d.exports},mHM2:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=s(t("q2NN")),a=s(t("ucif"));function s(e){return e&&e.__esModule?e:{default:e}}n.default={getList:function(e,n,t){var s=new FormData;s.append("findContent",e.findContent),s.append("pageNo",e.pageNo),i.default.post.bind(this)(a.default.permission.allocation,s,n,t,function(e){return{message:e.message,totalCount:e.data.total,rows:e.data.list.map(function(e){return{id:e.id,selected:!1,columns:[{name:"name",value:e.name||"--"},{name:"type",value:e.type||"--"},{name:"permissionNames",value:e.permissionNames||"--"}],operations:[{name:"选择权限",action:"selectPermission",type:"normal"}]}})}})},getPermissions:function(e,n,t){i.default.get.bind(this)(a.default.permission.selectPermissionById,{params:{id:e.id}},n,t,function(e){return e.data})},addPermissions:function(e,n,t){var s=new FormData;e.permissionIds.map(function(e){s.append("ids",e)}),s.append("roleId",e.roleId),i.default.post.bind(this)(a.default.permission.addPermission2Role,s,n,t,function(e){return e})},clearPermission:function(e,n,t){var s=new FormData;e.tableData.rows.map(function(e){e.selected&&s.append("roleIds",e.id)}),i.default.post.bind(this)(a.default.permission.clearPermissionByRoleIds,s,n,t,function(e){return e})}},e.exports=n.default},qjtb:function(e,n,t){"use strict";var i={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{attrs:{id:"permission-allocation"}},[t("tkm-table",{attrs:{tableData:e.tableData,headers:e.headers,searchOperations:e.searchOperations},on:{"init-data":e.initData,"search-operation":e.searchOperation,"rows-operation":e.rowsOperation}}),e._v(" "),t("tkm-dialog",{ref:"dialogForm",attrs:{title:"添加权限",cancelLabel:"取消",confirmLabel:"确定"}},e._l(e.permissions,function(n){return t("mu-checkbox",{key:n.id,attrs:{label:n.name,nativeValue:n.id},model:{value:e.permissionIds,callback:function(n){e.permissionIds=n},expression:"permissionIds"}})})),e._v(" "),t("tkm-dialog",{ref:"dialog",attrs:{title:"警告",cancelLabel:"取消",confirmLabel:"确定"}},[e._v("\n    "+e._s(e.dialogMsg)+"\n  ")])],1)},staticRenderFns:[]};n.a=i}});